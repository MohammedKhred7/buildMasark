import{_ as E,j as F,k as T,r,o as z,c as v,h as o,l as h,b as t,t as y,f as V,s as A,n as q,g as f,B as J,i as O,q as L,v as M}from"./index-DauF410Z.js";import{s as R}from"./index-CrC0n7Gm.js";import{l as G,N as H}from"./NotFound-9TjzJQwf.js";const K={class:"grid text-end"},P={class:"col-12",style:{"text-align":"end"}},Q={class:"w-full"},W={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},X={class:"flex gap-2"},Y={style:{display:"flex","justify-content":"center","margin-top":"1rem","margin-bottom":"1rem"}},Z={class:"col-span-12 p-2 md:p-16 card",style:{"border-radius":"20px"}},ee={key:0},le={class:"loading-state"},te={key:1,class:"flex flex-col justify-center items-center text-center px-4 py-4 md:py-0"},ae={style:{"align-items":"center",display:"flex","margin-left":"1rem"}},se=["src"],oe={class:"mb-2 mt-2 text-3xl font-semibold"},re={class:"text-2xl"},ne={key:2},ie={class:"empty-state"},de={__name:"reports",setup(ue){const{proxy:x}=O(),d=F(),g=JSON.parse(localStorage.getItem("token"));T();const u=r({email:"",password:"",confirm_password:"",name:""}),l=r({email:"",password:"",confirm_password:"",name:"",img:null,slug:""});r(!1);const i=r(!1);r([]);const C=(a,e,w)=>{l.value.name=a,l.value.email=e,l.value.img=w,i.value=!i.value},m=r(!1),$=async()=>{m.value=!0;try{if(l.value.name==="")d.add({severity:"error",summary:"خطاء في تسجيل أدمن",detail:"الرجاء إضافة إسم أدمن الجديد",life:3e3});else{if(l.value.password.length<6&&l.value.password!=="")throw new Error("الرجاء تسجيل كلمت المرور اكثر من 6 ");if(l.value.password!=l.value.confirm_password&&l.value.password!==""&&l.value.confirm_password!=="")throw new Error("كلمة المرور غير متطابقة");if(!l.value.email.includes("@")||!l.value.email.includes(".")||l.value.email==="")throw new Error("البريد الإكتروني لازم يحتوي على @ و . ");{new FormData().append("content_url",l.value.img instanceof File?l.value.img:null);const e=await V.request({url:x.$localhost+"/api/admin/update-admin",method:"post",headers:{Authorization:"Bearer "+g,"Content-Type":"multipart/form-data"},data:{name:l.value.name,password:l.value.password,password_confirmation:l.value.confirm_password,email:l.value.email,img:l.value.img instanceof File?l.value.img:null}});e&&(d.add({severity:"success",summary:"تعديل أدمن",detail:"تم تعديل أدمن بنجاح  ",life:3e3}),localStorage.setItem("name",JSON.stringify(l.value.name)),n.value=e.data.data,location.reload(),i.value=!1,l.value.name="",l.value.password="",l.value.confirm_password="",l.value.email="",l.value.img=null)}}}catch(a){d.add({severity:"error",summary:"تعديل أدمن",detail:a,life:3e3})}finally{m.value=!1}m.value=!1},b=r(!1),n=r(null),U=async()=>{b.value=!0;try{const a=await V.get(x.$localhost+"/api/admin/profile",{headers:{Authorization:"Bearer "+g}});a.status===200&&(n.value=a.data.data)}catch(a){console.error("Error fetching universities:",a),d.add({severity:"error",summary:"Error",detail:a.message,life:4e3})}b.value=!1},_=r(""),B=()=>{_.value=x.$localhost};r([]);const I=a=>{l.value.img=a.files[0]};return z(()=>{B(),U()}),(a,e)=>{const w=L,p=M,c=A,N=R,S=q;return f(),v("div",K,[o(w),o(S,{header:"تعديل أدمن",visible:i.value,"onUpdate:visible":e[5]||(e[5]=s=>i.value=s),style:{width:"90vh"},modal:!0},{default:h(()=>[t("div",P,[t("div",Q,[e[7]||(e[7]=t("label",{class:"block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"إسم أدمن ",-1)),o(p,{style:{"border-color":"var(--p-content-border-color)"},type:"text",placeholder:"الإسم",class:"input_border w-full mb-3 text-end",modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.name=s)},null,8,["modelValue"])]),e[8]||(e[8]=t("label",{for:"email2",class:"text-end block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"البريد الإكتروني",-1)),o(p,{style:{"border-color":"var(--p-content-border-color)"},id:"email2",type:"text",placeholder:"البريد الإكتروني",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:l.value.email,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.email=s)},null,8,["modelValue"]),e[9]||(e[9]=t("label",{class:"block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"}," تعديل الصورة ",-1)),o(N,{name:"demo[]",accept:"image/*",onSelect:I},{header:h(({chooseCallback:s,uploadCallback:me,clearCallback:j,files:k})=>[t("div",W,[t("div",X,[o(c,{onClick:D=>s(),icon:"pi pi-file",rounded:"",outlined:"",severity:"secondary"},null,8,["onClick"]),o(c,{onClick:D=>j(),icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",disabled:!k||k.length===0},null,8,["onClick","disabled"])]),J(" "+y(l.value.img),1)])]),_:1}),e[10]||(e[10]=t("label",{for:"password3",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mt-2 mb-2"},"كلمة المرور",-1)),o(p,{style:{"border-color":"var(--p-content-border-color)"},id:"password3",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:u.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>u.value.password=s)},null,8,["modelValue"]),e[11]||(e[11]=t("label",{for:"password4",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mb-2"},"تأكيد كلمة المرور",-1)),o(p,{style:{"border-color":"var(--p-content-border-color)"},id:"password4",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:u.value.confirm_password,"onUpdate:modelValue":e[3]||(e[3]=s=>u.value.confirm_password=s)},null,8,["modelValue"]),t("div",Y,[o(c,{loading:m.value,style:{"font-size":"medium"},class:"w-full",severity:"help",onClick:e[4]||(e[4]=s=>$()),label:"تعديل أدمن"},null,8,["loading"])])])]),_:1},8,["visible"]),t("div",Z,[e[18]||(e[18]=t("h5",{class:"text-2xl"},"الملف الشخصي",-1)),b.value?(f(),v("div",ee,[t("div",le,[e[12]||(e[12]=t("br",null,null,-1)),o(G,{size:"sm",color:"help",class:"flex justify-center"}),e[13]||(e[13]=t("p",{class:"text bold-18 lh-24 pb-6"}," ...... تحميل الملف الشخصي يرجى الانتظار ",-1)),e[14]||(e[14]=t("br",null,null,-1))])])):n.value?(f(),v("div",te,[t("div",ae,[t("img",{src:_.value+"/storage/admins/"+n.value.img,alt:"Image",width:"400",style:{"vertical-align":"middle",width:"140px",height:"140px",border:"1px solid rgba(57, 103, 129,0.5)","border-radius":"50%",padding:"2px"}},null,8,se)]),t("div",oe,y(n.value.name),1),t("span",re,y(n.value.email),1),o(c,{icon:"pi pi-pencil",label:"تعديل الملف الشخصي",severity:"help",class:"mt-4",onClick:e[6]||(e[6]=s=>C(n.value.name,n.value.email,n.value.img))})])):(f(),v("div",ne,[t("div",ie,[e[15]||(e[15]=t("br",null,null,-1)),o(H,{size:"lm",class:"flex justify-center"}),e[16]||(e[16]=t("h1",{class:"text bold-18 lh-24 pb-6"},"لم يتم العثور على الملف الشخصي ",-1)),e[17]||(e[17]=t("br",null,null,-1))])]))])])}}},fe=E(de,[["__scopeId","data-v-e230372a"]]);export{fe as default};
