import{s as ee,a as le}from"./index-DjqfwAtl.js";import{_ as ae,j as te,k as se,r as p,w as oe,o as re,c as j,h as r,l as y,b as l,m as ne,f as V,n as de,g as C,C as ie,t as A,y as ue,F as me,e as ce,A as D,B as F,i as pe,q as ve,v as fe,s as be,x as we}from"./index-D12yBOV5.js";import{s as ye}from"./index-yGWBZTor.js";import{l as xe,N as ge}from"./NotFound-BtbOrnre.js";import"./index-CdGN-hhu.js";const he={class:"grid text-end"},ke={class:"col-12",style:{"text-align":"end"}},_e={class:"w-full"},Ve={style:{display:"flex","justify-content":"center","margin-top":"1rem","margin-bottom":"1rem"}},Ce={class:"col-12",style:{"text-align":"end"}},$e={class:"w-full"},Ue={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},je={class:"flex gap-2"},Ae={style:{display:"flex","justify-content":"center","margin-top":"1rem","margin-bottom":"1rem"}},Be={class:"col-12"},Ie={class:"card"},ze={style:{"justify-content":"space-between"},class:"flex mt-2 flex-column md:flex-row md:justify-content-between md:align-items-center"},Ee={class:"text-right"},qe={style:{"justify-content":"space-between"},class:"flex mb-4 col-12 flex-column gap-8 p-2 md:justify-content-between md:align-items-center"},Se={class:"td"},De={class:"td mt-1"},Fe={class:"th mt-3"},Te={class:"font-medium text-1xl cursor-pointer"},Ne={class:"th mt-3"},Pe={class:"font-medium text-1xl"},Le={class:"tm"},Me=["src"],Oe={class:"loading-state"},Je={class:"empty-state"},Re={__name:"adminSetting",setup(Ge){const{proxy:x}=pe(),f=te(),g=JSON.parse(localStorage.getItem("token")),B=se(),s=p({email:"",password:"",confirm_password:"",name:""}),a=p({email:"",password:"",confirm_password:"",name:"",img:null,slug:""}),h=p(!1),k=p(!1);p([]);const T=(t,e,u,n)=>{a.value.name=t,a.value.email=e,a.value.img=u,a.value.slug=n,k.value=!k.value},N=()=>{h.value=!h.value},m=p(!1),P=async t=>{try{if(m.value=!0,s.value.name===""&&f.add({severity:"error",summary:"خطاء في تسجيل أدمن",detail:"الرجاء إضافة إسم أدمن الجديد",life:3e3}),s.value.email===""&&s.value.password==="")throw new Error("الرجاء تسجيل البريد الإكتروني و كلمت المرور");if(s.value.password.length<6)throw new Error("الرجاء تسجيل كلمت المرور اكثر من 6 ");if(s.value.email===""&&s.value.password!=="")throw new Error("الرجاء تسجيل البريد الإكتروني");if(s.value.password!=s.value.confirm_password)throw new Error("كلمة المرور غير متطابقة");if(!s.value.email.includes("@")||!s.value.email.includes("."))throw new Error("البريد الإكتروني لازم يحتوي على @ و . ");if(s.value.password===""&&s.value.email!=="")throw new Error("الرجاء تسجيل كلمت المرور");{const e=await V.request({url:x.$localhost+"/api/admin/create-admin",method:"post",headers:{Authorization:"Bearer "+g},data:{name:s.value.name,password:s.value.password,password_confirmation:s.value.confirm_password,email:s.value.email}});e.data.status&&(f.add({severity:"success",summary:"إنشاء أدمن",detail:"تم إنشاء أدمن جديد بنجاح بإسم :  "+s.value.name,life:3e3}),J(e.data.data),h.value=!1,s.value.name="",s.value.password="",s.value.confirm_password="",s.value.email="")}}catch(e){f.add({severity:"error",summary:"إنشاء أدمن",detail:e,life:3e3}),m.value=!1}finally{m.value=!1}m.value=!1},L=async()=>{m.value=!0;try{if(a.value.name==="")f.add({severity:"error",summary:"خطاء في تسجيل أدمن",detail:"الرجاء إضافة إسم أدمن الجديد",life:3e3});else{if(a.value.password.length<6&&a.value.password!=="")throw new Error("الرجاء تسجيل كلمت المرور اكثر من 6 ");if(a.value.password!=a.value.confirm_password&&a.value.password!==""&&a.value.confirm_password!=="")throw new Error("كلمة المرور غير متطابقة");if(!a.value.email.includes("@")||!a.value.email.includes(".")||a.value.email==="")throw new Error("البريد الإكتروني لازم يحتوي على @ و . ");{new FormData().append("content_url",a.value.img instanceof File?a.value.img:null);const e=await V.request({url:x.$localhost+"/api/admin/update-admin/"+a.value.slug,method:"post",headers:{Authorization:"Bearer "+g,"Content-Type":"multipart/form-data"},data:{name:a.value.name,password:a.value.password,password_confirmation:a.value.confirm_password,email:a.value.email,img:a.value.img instanceof File?a.value.img:null}});e&&(f.add({severity:"success",summary:"تعديل أدمن",detail:"تم تعديل أدمن بنجاح  ",life:3e3}),z(a.value.slug,e.data.data),k.value=!1,a.value.name="",a.value.password="",a.value.confirm_password="",a.value.email="",a.value.slug="",a.value.img=null)}}}catch(t){f.add({severity:"error",summary:"تعديل أدمن",detail:t,life:3e3})}finally{m.value=!1}m.value=!1},$=p(!1),i=p([]),M=async()=>{$.value=!0;try{const t=await V.get(x.$localhost+"/api/admin/admins",{headers:{Authorization:"Bearer "+g}});t.status===200&&(i.value=t.data.data.map(e=>(e.search=`${e.name} ${e.email}`,e)),v.value=i.value)}catch(t){console.error("Error fetching universities:",t),f.add({severity:"error",summary:"Error",detail:t.message,life:4e3})}$.value=!1},O=(t,e)=>{B.require({target:t.target,message:"هل انت متأكد من حذف أدمن",icon:"pi pi-exclamation-triangle",rejectProps:{label:"الغاء",severity:"secondary",outlined:!0},acceptProps:{severity:"info",label:"موافق"},accept:()=>{m.value=!0,V.request({url:x.$localhost+"/api/admin/delete-admin/"+e,method:"delete",headers:{Authorization:"Bearer "+g}}).then(u=>{u&&(f.add({severity:"success",summary:"حذف أدمن",detail:"تم حذف أدمن بنجاح  ",life:3e3}),R(e)),m.value=!1}),m.value=!1},reject:()=>{}})},I=(t,e,u)=>{let n="",c="";u=="active"?(n="هل انت متأكد من اقفال الأدمن",c=" تم اقفال الأدمن بنجاح  "):(n="هل انت متأكد من فتح الأدمن",c=" تم فتح الأدمن بنجاح  "),B.require({target:t.target,message:n,icon:"pi pi-exclamation-triangle",rejectProps:{label:"الغاء",severity:"secondary",outlined:!0},acceptProps:{severity:"info",label:"موافق"},accept:()=>{V.request({url:x.$localhost+"/api/admin/blockAndUnblock-admin/"+e,method:"get",headers:{Authorization:"Bearer "+g}}).then(_=>{_&&(f.add({severity:"success",summary:"حالة الأدمن",detail:c,life:3e3}),z(e,_.data.data))})},reject:()=>{}})};function J(t){let u=(Array.isArray(t)?t:[t]).map(n=>(n.search=`${n.name} ${n.email}`,n));i.value=[...u,...i.value],v.value=i.value}function R(t){const e=i.value.findIndex(u=>u.slug===t);e!==-1&&i.value.splice(e,1),v.value=i.value}function z(t,e){const u=i.value.findIndex(n=>n.slug===t);if(u!==-1){const n={...e,search:`${e.name} ${e.email}`};i.value.splice(u,1,n),v.value=i.value}}const w=p([]),U=p([]),v=p([]),G=()=>{w.value=[...v.value],i.value=v.value},H=t=>{setTimeout(()=>{t.query.trim().length!=null||t.query.trim().length!=""?t.inputType==="backspace"||t.query.trim().length===null?(w.value=[...v.value],i.value=v.value):(w.value=v.value.filter(e=>e.search.toLowerCase().includes(t.query.toLowerCase())),i.value=w.value):i.value=v.value},50)};oe(U.value,t=>{t.length!==0?(w.value=t.filter(e=>e.search),i.value=w.value):i.value=v.value},{deep:!0});const E=p(""),K=()=>{E.value=x.$localhost};p([]);const Q=t=>{a.value.img=t.files[0]};return re(()=>{K(),M()}),(t,e)=>{const u=ve,n=fe,c=be,_=de,W=ye,X=le,q=we,Y=ee;return C(),j("div",he,[r(u),r(_,{header:"إضافة أدمن",visible:h.value,"onUpdate:visible":e[5]||(e[5]=o=>h.value=o),style:{width:"70vh"},modal:!0},{default:y(()=>[l("div",ke,[l("div",_e,[e[14]||(e[14]=l("label",{class:"block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"إسم أدمن ",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},type:"text",placeholder:"الإسم",class:"input_border w-full mb-3 text-end",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o)},null,8,["modelValue"])]),e[15]||(e[15]=l("label",{for:"email1",class:"text-end block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"البريد الإكتروني",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},id:"email1",type:"text",placeholder:"البريد الإكتروني",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.email=o)},null,8,["modelValue"]),e[16]||(e[16]=l("label",{for:"password1",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mb-2"},"كلمة المرور",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},id:"password1",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password=o)},null,8,["modelValue"]),e[17]||(e[17]=l("label",{for:"password2",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mb-2"},"تأكيد كلمة المرور",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},id:"password2",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:s.value.confirm_password,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.confirm_password=o)},null,8,["modelValue"]),l("div",Ve,[r(c,{loading:m.value,style:{"font-size":"medium"},class:"w-full",severity:"help",onClick:e[4]||(e[4]=o=>P()),label:"إنشاء أدمن"},null,8,["loading"])])])]),_:1},8,["visible"]),r(_,{header:"تعديل أدمن",visible:k.value,"onUpdate:visible":e[11]||(e[11]=o=>k.value=o),style:{width:"80vh"},modal:!0},{default:y(()=>[l("div",Ce,[l("div",$e,[e[18]||(e[18]=l("label",{class:"block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"إسم أدمن ",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},type:"text",placeholder:"الإسم",class:"input_border w-full mb-3 text-end",modelValue:a.value.name,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.name=o)},null,8,["modelValue"])]),e[19]||(e[19]=l("label",{for:"email2",class:"text-end block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"البريد الإكتروني",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},id:"email2",type:"text",placeholder:"البريد الإكتروني",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:a.value.email,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.email=o)},null,8,["modelValue"]),e[20]||(e[20]=l("label",{class:"block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"}," تعديل الصورة ",-1)),r(W,{name:"demo[]",accept:"image/*",onSelect:Q},{header:y(({chooseCallback:o,uploadCallback:d,clearCallback:S,files:b})=>[l("div",Ue,[l("div",je,[r(c,{onClick:Z=>o(),icon:"pi pi-file",rounded:"",outlined:"",severity:"secondary"},null,8,["onClick"]),r(c,{onClick:Z=>S(),icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",disabled:!b||b.length===0},null,8,["onClick","disabled"])]),ie(" "+A(a.value.img),1)])]),_:1}),e[21]||(e[21]=l("label",{for:"password3",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mt-2 mb-2"},"كلمة المرور",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},id:"password3",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:s.value.password,"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.password=o)},null,8,["modelValue"]),e[22]||(e[22]=l("label",{for:"password4",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mb-2"},"تأكيد كلمة المرور",-1)),r(n,{style:{"border-color":"var(--p-content-border-color)"},id:"password4",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb-4 text-end",modelValue:s.value.confirm_password,"onUpdate:modelValue":e[9]||(e[9]=o=>s.value.confirm_password=o)},null,8,["modelValue"]),l("div",Ae,[r(c,{loading:m.value,style:{"font-size":"medium"},class:"w-full",severity:"help",onClick:e[10]||(e[10]=o=>L()),label:"تعديل أدمن"},null,8,["loading"])])])]),_:1},8,["visible"]),l("div",Be,[l("div",Ie,[e[30]||(e[30]=l("h5",{style:{"font-size":"large"}},"أعدادات الأدمن",-1)),r(Y,{value:i.value,paginator:!0,rows:7},ne({header:y(()=>[l("div",ze,[l("div",null,[r(X,{modelValue:U.value,"onUpdate:modelValue":e[12]||(e[12]=o=>U.value=o),optionLabel:"search",dropdown:"",display:"chip",forceSelection:!0,completeOnFocus:!1,panelStyle:{display:"none"},"dropdown-icon":"pi pi-search",suggestions:w.value,placeholder:"بحث عن الأدمن/ البريد الإكروني",onComplete:e[13]||(e[13]=o=>H(o)),onInput:G,field:"search"},null,8,["modelValue","suggestions"])]),l("div",Ee,[r(c,{onClick:ue(N,["prevent"]),style:{"font-size":"medium"},label:"إضافة أدمن",severity:"help",outlined:""})])])]),list:y(o=>[e[23]||(e[23]=l("div",{class:"tbody col-12 flex flex-column mb-6 mt-4 gap-8",style:{"justify-content":"space-between","font-size":"large"}},[l("div",{class:"td"},"الإعدادات"),l("div",{class:"td"}," الحالة "),l("div",{class:"th"}," البريد الإكتروني "),l("div",{class:"th"}," إسم الأدمن "),l("div",{class:"tm"}," الصورة ")],-1)),(C(!0),j(me,null,ce(o.items,(d,S)=>(C(),j("div",qe,[l("div",Se,[r(q),r(c,{loading:m.value,severity:"help",icon:"pi pi-trash",onClick:b=>O(b,d==null?void 0:d.slug)},null,8,["loading","onClick"]),r(c,{icon:"pi pi-pencil",severity:"help",class:"mr-4",onClick:b=>T(d==null?void 0:d.name,d==null?void 0:d.email,d.img,d.slug)},null,8,["onClick"])]),l("div",De,[r(q),d.status==="inactive"?(C(),D(c,{key:0,class:"font-bold text-1xl ml-2",onClick:b=>I(b,d.slug,d.status),icon:"pi pi-lock",label:"حظر",severity:"danger",outlined:""},null,8,["onClick"])):F("",!0),d.status==="active"?(C(),D(c,{key:1,class:"font-bold text-1xl ml-2",onClick:b=>I(b,d.slug,d.status),icon:"pi pi-lock-open",label:"فعال ",severity:"info",outlined:""},null,8,["onClick"])):F("",!0)]),l("div",Fe,[l("span",Te,A(d.email),1)]),l("div",Ne,[l("span",Pe,A(d==null?void 0:d.name),1)]),l("div",Le,[l("img",{src:E.value+"/storage/admins/"+d.img,alt:"Image",style:{"vertical-align":"middle",width:"40px",height:"40px",border:"1px solid rgba(57, 103, 129,0.5)","border-radius":"50%",padding:"2px"}},null,8,Me)])]))),256))]),_:2},[$.value?{name:"empty",fn:y(()=>[l("div",Oe,[e[24]||(e[24]=l("br",null,null,-1)),r(xe,{size:"sm",color:"help",class:"flex justify-center"}),e[25]||(e[25]=l("p",{class:"text bold-18 lh-24 pb-6"}," ...... تحميل الأدمنات يرجى الانتظار ",-1)),e[26]||(e[26]=l("br",null,null,-1))])]),key:"0"}:{name:"empty",fn:y(()=>[l("div",Je,[e[27]||(e[27]=l("br",null,null,-1)),r(ge,{size:"lm",class:"flex justify-center"}),e[28]||(e[28]=l("h1",{class:"text bold-18 lh-24 pb-6"},"لم يتم العثور على أدمنات ",-1)),e[29]||(e[29]=l("br",null,null,-1))])]),key:"1"}]),1032,["value"])])])])}}},Ye=ae(Re,[["__scopeId","data-v-63c339ce"]]);export{Ye as default};
