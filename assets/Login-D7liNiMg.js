import{_ as x,r as o,u as b,j as h,aH as y,c as k,h as l,b as s,d as S,y as I,F as V,v as N,s as E,g as B,aI as J,f as O,q as L,i as M}from"./index-D12yBOV5.js";import{_ as T}from"./FloatingConfigurator-Ospx7H1B.js";const $={class:"flex items-center justify-center min-h-screen min-w-[50vw] overflow-hidden"},U={class:"card"},j={class:"text-center"},F=["src"],q={class:"content"},C={class:"form"},D={class:"flex-column gap-18"},H={__name:"Login",setup(R){o(!1);const{isDarkTheme:p}=b(),{proxy:f}=M(),v=J(),i=h(),d=o(""),u=o(null),c=o(null),e=o({email:"",password:""}),r=o(!1),g=async()=>{r.value=!0;try{if(e.value.email===""&&e.value.password==="")throw new Error("الرجاء تسجيل البريد الإكتروني و كلمت المرور");if(e.value.password.length<6)throw new Error("الرجاء تسجيل كلمت المرور اكثر من 6 ");if(e.value.email===""&&e.value.password!=="")throw new Error("الرجاء تسجيل البريد الإكتروني");if(!e.value.email.includes("@")||!e.value.email.includes("."))throw new Error("البريد الإكتروني لازم يحتوي على @ و . ");if(e.value.password===""&&e.value.email!=="")throw new Error("الرجاء تسجيل كلمت المرور");const a=await O.post(f.$localhost+"/api/auth/login-admin",e.value);a.status===200&&(a.data.status?(d.value=a.data.token,u.value=a.data.super,c.value=a.data.name,localStorage.setItem("name",JSON.stringify(c.value)),localStorage.setItem("slug",JSON.stringify(u.value===1?"admin":"owner")),localStorage.setItem("token",JSON.stringify(d.value)),v.push({path:"/dashboard"}),e.value.email="",e.value.password=""):i.add({severity:"error",summary:"كلمة المرور والبريد الإكتروني غير متطابقين",detail:a.data.message,life:4e3}))}catch(a){i.add({severity:"error",summary:"خطاء في تسجيل الدخول",detail:a.message,life:4e3})}finally{r.value=!1}};return o(!1),y(()=>{localStorage.setItem("token",JSON.stringify("login")),localStorage.setItem("slug",JSON.stringify("login"))}),(a,t)=>{const w=L,m=N,_=E;return B(),k(V,null,[l(T),l(w),s("div",$,[s("div",U,[s("div",j,[s("img",{src:(S(p),"/demo/images/Msark-logo.png"),width:"170px",class:"shrink-0 mx-auto"},null,8,F)]),s("div",q,[s("div",C,[s("form",{onSubmit:I(g,["prevent"])},[s("div",D,[t[2]||(t[2]=s("label",{for:"email1",class:"text-end block text-surface-900 dark:text-surface-0 text-xl font-medium mb-2"},"البريد الإكتروني",-1)),l(m,{style:{"border-color":"var(--p-content-border-color)"},id:"email1",type:"text",placeholder:"البريد الإكتروني",class:"input_border border-muted w-full md:w-full mb-8 text-end",modelValue:e.value.email,"onUpdate:modelValue":t[0]||(t[0]=n=>e.value.email=n)},null,8,["modelValue"]),t[3]||(t[3]=s("label",{for:"password1",class:"text-end block text-surface-900 dark:text-surface-0 font-medium text-xl mb-2"},"كلمة المرور",-1)),l(m,{style:{"border-color":"var(--p-content-border-color)"},id:"password1",type:"password",placeholder:"كلمة المرور",class:"input_border border-muted w-full md:w-full mb- text-end",modelValue:e.value.password,"onUpdate:modelValue":t[1]||(t[1]=n=>e.value.password=n)},null,8,["modelValue"])]),l(_,{label:"تسجيل",class:"w-full btn",unstyled:!0,loading:r.value,type:"submit"},null,8,["loading"])],32)])])])])],64)}}},G=x(H,[["__scopeId","data-v-56a711cd"]]);export{G as default};
